#!/bin/env ruby
# encoding: utf-8
class Survey < ActiveRecord::Base
  attr_accessible :user_id, :conoces, :que_conoces, :email, :como_dejaste, :municipio, :colonia, :calle, :genero, :edad, :solo, :con_quien_vive, :hijos, :ocupacion, :estudia, :horas, :nivel, :grado, :dejo_estudiar, :causa, :regresar, :regresar_porque, :antiguedad, :se_organizan, :participa, :quien_vigila, :conviene, :provoca, :soluciones, :victima, :tipo_delito, :involucrado, :pandillas, :consumo, :acciones, :actividades, :deporte, :tuviera, :reunen, :act_reunen, :jovenes_estudian, :convivencia, :lugares, :agusto, :agusto_porque, :proximo, :visualizacion, :importante, :fumas, :edad_fumar, :frecuencia, :drogas, :como_dejaste, :tipo_droga, :frec_droga, :amigos, :familia, :relacion, :tiempo, :pareja, :rel_sex, :tiempo_relaciones, :primera_vez, :parejas_sexuales, :anticonceptivo, :metodos, :motivos, :grupo, :tipo_grupo, :gustaria_participar, :tipo_gustaria, :porque_no, :necesario, :acciones_comunidad, :ocupacion_otro, :causa_otro, :otro_tipo_delito, :actividades_otro, :act_reunen_otro, :lugares_otro, :proximo_otro, :importante_otro, :frecuencia_otro, :tipo_droga_otro, :amigos_otro, :parejas_sexuales_otro, :metodos_otro, :motivos_otro, :city, :latitude, :longitude, :start_time
  belongs_to :user
  #serialize :con_quien_vive

  def self.to_csv
    names = ["Numero","User Id","Email","¿Conoces al Instituto Mexicano de la Juventud (IMJUVE)?", "¿qué conoces de él?", "Municipio", "Colonia", "Calle, Manzana o Coto", "Género del encuestado", "¿Cuál es su/tu edad?", "¿Vive(s) solo?", "¿Con quien vive(s)?", "¿Cuántos hij@s tiene(s)?", "Actualmente, ¿a que se/te dedica(s) prioritariamente?", "Otro", "¿Qué estás estudiando?", "¿Cuál es tu nivel de estudios?", "¿Hasta qué grado estudiaste?", "¿Tuvo/tuviste que dejar de estudiar?", "¿Cuál fue la causa?", "Otro", "¿Te gustaría regresar a estudiar?", "¿Por qué?", "¿Cuantos años tienes viviendo en la colonia?", "¿Los vecinos de su/tu cuadra se organizan para realizar algunas actividades?", "¿Usted o algún miembro del hogar participa(n) en algún grupo organizado u organización de vecinos para realizar actividades en favor de la colonia?", "¿Quién o quienes vigilan en tu/su colonia?", "¿Cuándo cree que la vigilancia debe existir en su colonia?", "Mencione/menciona dos causas que provoquen inseguridad en esta colonia", "Mencione/menciona dos soluciones que combatan la inseguridad en esta colonia", "¿Ha/has sido víctima de inseguridad dentro de esta colonia?", "¿De qué tipo de delito ha/has sido víctima?", "Otro", "¿Se ha visto/Te has visto involucrado en algún tipo de delito?", "¿Cuáles son las actividades de Las bandas o pandillas de esta colonia?", "Sobre el consumo de alcohol y drogas en las calles de esta colonia", "¿Qué acciones cree/crees que podría hacer el gobierno para mejorar la seguridad en su/tu colonia?", "¿Qué actividades realiza(s) en su/tu tiempo libre?", "Otro", "¿Qué deporte?", "¿Qué le gustaría que tuviera su/tu colonia?", "¿En dónde se reúnen los jóvenes de su/tu colonia?", "¿Qué actividades realizan los jóvenes cuando se reúnen?", "Otro", "La mayoría de los jóvenes en esta colonia estudian hasta la ...", "¿En la colonia hay lugares que promueven la convivencia entre jóvenes?", "¿Qué tipo de lugares?", "Otro", "¿Te sientes a gusto con tu vida?", "¿Por qué consideras que sí/no?", "En el próximo año de mi vida quiero...", "Otro", "¿Cómo te visualizas en 5 años más?", "Lo más importante en este momento de mi vida es...", "Otro", "¿Fumas cigarros?", "¿A qué edad comenzaste a fumar?", "¿Con qué frecuencia consumes alcohol?", "Otro", "¿Actualmente consumes drogas?", "¿Cómo las dejaste? ¿Quién o quiénes te ayudaron para dejarlas?", "¿Qué tipo de droga consumes o consumías?", "Otro", "¿Con qué frecuencia?", "Los amigos que tengo...", "Otro", "Considero que en mi familia...", "¿Actualmente tienes una relación afectiva con alguien?", "¿Cuánto tiempo llevas con esta relación?", "¿Tu pareja es de esta colonia?", "¿Has tenido relaciones sexuales alguna vez?", "Actualmente, ¿tienes relaciones sexuales?", "¿A qué edad tuviste relaciones sexuales por primera vez?", "¿Tus parejas sexuales en este último año han sido…?", "Otro", "En tus relaciones sexuales  ¿usas o has usado un método anticonceptivo?", "Si contesta que Si, ¿qué método has usado generalmente?", "Otro", "¿Cuáles fueron los motivos para no usar algún método anticonceptivo?", "Otro", "¿Has participado en algún grupo de jóvenes?", "¿En qué tipo de grupo has participado o participas? y ¿qué actividades realizabas o realizas?", "¿Te gustaría participar en alguna actividad dedicada para jóvenes como tú?", "¿En qué tipo de actividades te gustaría participar?", "¿Porqué no?", "¿Consideras que tu colonia tiene lo necesario para que como joven puedas realizar actividades deportivas y recreativas?", "¿Qué acciones crees pueden realizar ustedes los jóvenes para apoyar a su comunidad?"]
    CSV.generate do |csv|
      csv << names
      all.each do |survey|
        csv << survey.attributes.values_at(*column_names)
      end
    end
  end

end
